runtime: nodejs20

service: ip-lookup

instance_class: F1

automatic_scaling:
  min_instances: 0
  max_instances: 2
  target_cpu_utilization: 0.65

handlers:
  # Serve static files from dist/apps/ip-lookup
  - url: /assets
    static_dir: dist/apps/ip-lookup/assets
    secure: always

  - url: /.*
    static_files: dist/apps/ip-lookup/index.html
    upload: dist/apps/ip-lookup/index.html
    secure: always

env_variables:
  NODE_ENV: 'production'
